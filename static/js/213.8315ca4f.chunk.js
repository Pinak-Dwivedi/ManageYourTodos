"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[213],{345:function(e,t,s){s.d(t,{Z:function(){return o}});var n=s(791),r=s(725),a=s(184);function o(e){var t=e.confirmBoxRef,s=e.deleteFunction,o=(0,n.useContext)(r.Z),c=o.loading;o.setLoading;return(0,n.useEffect)((function(){if(null!=t.current){var e=setTimeout((function(){t.current.classList.remove("active")}),5e3);return function(){clearTimeout(e)}}}),[]),(0,a.jsx)("div",{className:"confirmBox-overlay",children:(0,a.jsxs)("div",{ref:t,className:"confirmBox-container",children:[(0,a.jsx)("div",{className:"confirmBox-message",children:"\u26a0\ufe0f Are you sure! you want to delete this todo"}),(0,a.jsxs)("div",{className:"confirmBox-buttonsContainer",children:[(0,a.jsx)("button",{className:"confirmBox-button confirmBox-yesButton",onClick:function(){if(c)return!1;s(),t.current.classList.remove("active")},children:"Yes"}),(0,a.jsx)("button",{className:"confirmBox-button confirmBox-noButton",onClick:function(){return t.current.classList.remove("active")},children:"No"})]})]})})}},213:function(e,t,s){s.r(t),s.d(t,{default:function(){return b}});var n=s(165),r=s(861),a=s(439),o=s(791),c=s(689),i=s(797),u=s(355),l=s(725),d=s(73),f=s(184);function m(){var e=(0,o.useContext)(l.Z),t=e.authUser,s=e.setAuthUser,c=e.loading,i=e.setLoading,u=(0,o.useState)(t.name),m=(0,a.Z)(u,2),h=m[0],p=m[1],x=(0,o.useState)(t.email),v=(0,a.Z)(x,2),j=v[0],b=v[1],N=(0,o.useState)({}),g=(0,a.Z)(N,2),y=g[0],Z=g[1];function k(){return(k=(0,r.Z)((0,n.Z)().mark((function e(r){var a,o,c;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i(!0),r.preventDefault(),e.prev=2,e.next=5,fetch("".concat("https://manage-your-todos-backend.onrender.com","/users/").concat(t.id),{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:h,email:j})});case 5:return a=e.sent,e.next=8,a.json();case 8:if(o=e.sent,Z({}),o.success){e.next=12;break}throw o;case 12:s(o.user),i(!1),d.ZP.success(o.message),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(2),i(!1),"object"===typeof e.t0.error?(c={},e.t0.error.forEach((function(e){for(var t in e)c[t]=e[t][0]})),Z(c)):d.ZP.error(e.t0.message);case 21:case"end":return e.stop()}}),e,null,[[2,17]])})))).apply(this,arguments)}return(0,f.jsxs)("form",{onSubmit:function(e){if(c)return!1;!function(e){k.apply(this,arguments)}(e)},className:"profile-update-form",children:[(0,f.jsxs)("div",{className:"profile-update-form-field",children:[(0,f.jsx)("label",{className:"profile-update-form-label",htmlFor:"name",children:"Name"}),(0,f.jsx)("input",{className:"profile-update-form-input",required:!0,type:"text",id:"name",value:h,onChange:function(e){return p(e.target.value)}}),(0,f.jsx)("span",{className:"profile-update-form-error",children:y.name})]}),(0,f.jsxs)("div",{className:"profile-update-form-field",children:[(0,f.jsx)("label",{className:"profile-update-form-label",htmlFor:"email",children:"Email"}),(0,f.jsx)("input",{className:"profile-update-form-input",required:!0,type:"text",id:"email",value:j,onChange:function(e){return b(e.target.value)}}),(0,f.jsx)("span",{className:"profile-update-form-error",children:y.email})]}),(0,f.jsx)("button",{className:"profile-update-form-submitButton",type:"submit",children:"Update Profile"})]})}function h(e){var t=e.profileImage,s=(0,o.useRef)();return(0,o.useEffect)((function(){function e(e){if(null!=s.current){var t=s.current.firstChild,n=e.target===t;(n||null==e.target.closest(".dashboard-profile-info"))&&(n?s.current.classList.toggle("active"):s.current.classList.remove("active"))}}return document.addEventListener("click",e),function(){return document.removeEventListener("click",e)}}),[]),(0,f.jsxs)("div",{ref:s,className:"dashboard-profile-info",children:[(0,f.jsx)("button",{className:"dashboard-profile-info-button",children:null==t?(0,f.jsx)(u.$yZ,{className:"dashboard-profile-info-image",size:"5rem",color:"#009fbd"}):(0,f.jsx)("img",{className:"dashboard-profile-info-image",src:"".concat("https://manage-your-todos-backend.onrender.com","/").concat(t)})}),(0,f.jsx)("div",{className:"dashboard-profile-info-content",children:(0,f.jsx)(m,{})})]})}var p=s(126),x=s(345);function v(e){var t=e.setUsers,s=e.userId,i=e.userName,u=e.userEmail,m=(0,o.useContext)(l.Z),h=(m.loading,m.setLoading),v=(0,o.useState)(i),j=(0,a.Z)(v,2),b=j[0],N=j[1],g=(0,o.useState)(u),y=(0,a.Z)(g,2),Z=y[0],k=y[1],w=(0,o.useState)([]),C=(0,a.Z)(w,2),B=C[0],T=C[1],E=(0,c.s0)(),P=(0,o.useRef)();function S(){return(S=(0,r.Z)((0,n.Z)().mark((function e(){var t,r,a;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h(!0),e.prev=1,e.next=4,fetch("".concat("https://manage-your-todos-backend.onrender.com","/users/").concat(s),{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:b,email:Z})});case 4:return t=e.sent,e.next=7,t.json();case 7:if(r=e.sent,T({}),r.success){e.next=11;break}throw r;case 11:h(!1),d.ZP.success(r.message),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(1),h(!1),"object"===typeof e.t0.error?(a={},e.t0.error.forEach((function(e){for(var t in e)a[t]=e[t][0]})),T(a)):d.ZP.error(e.t0.error);case 19:case"end":return e.stop()}}),e,null,[[1,15]])})))).apply(this,arguments)}function L(){return(L=(0,r.Z)((0,n.Z)().mark((function e(){var r,a;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h(!0),e.prev=1,e.next=4,fetch("".concat("https://manage-your-todos-backend.onrender.com","/users/").concat(s),{method:"DELETE",credentials:"include"});case 4:return r=e.sent,e.next=7,r.json();case 7:if((a=e.sent).success){e.next=10;break}throw a;case 10:t((function(e){return e.filter((function(e){return e.id!==s}))})),h(!1),d.ZP.success(a.message),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(1),h(!1),d.ZP.error(e.t0.error);case 19:case"end":return e.stop()}}),e,null,[[1,15]])})))).apply(this,arguments)}return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(x.Z,{confirmBoxRef:P,deleteFunction:function(){return L.apply(this,arguments)}}),(0,f.jsxs)("div",{className:"user-info",children:[(0,f.jsx)("div",{className:"user-id",children:s}),(0,f.jsxs)("div",{className:"user-info-field",children:[(0,f.jsxs)("div",{className:"user-info-field-input",children:[(0,f.jsx)(p.Ph1,{}),(0,f.jsx)("input",{className:"user-name",type:"text",value:b,onChange:function(e){return N(e.target.value)}})]}),(0,f.jsx)("span",{className:"user-info-field-error",children:B.name})]}),(0,f.jsxs)("div",{className:"user-info-field",children:[(0,f.jsxs)("div",{className:"user-info-field-input",children:[(0,f.jsx)(p.Ph1,{}),(0,f.jsx)("input",{className:"user-email",type:"text",value:Z,onChange:function(e){return k(e.target.value)}})]}),(0,f.jsx)("span",{className:"user-info-field-error",children:B.email})]})]}),(0,f.jsxs)("div",{className:"user-buttons",children:[(0,f.jsx)("button",{className:"user-view-todos-button user-button",onClick:function(){return E("/usertodos/".concat(s),{state:{userName:b}})},children:"View Todos"}),(0,f.jsx)("button",{className:"user-update-button user-button",onClick:function(){return S.apply(this,arguments)},children:"Update"}),(0,f.jsx)("button",{className:"user-delete-button user-button",onClick:function(){return P.current.classList.add("active")},children:"Delete"})]})]})}function j(){(0,o.useContext)(l.Z).authUser;var e=(0,o.useState)([]),t=(0,a.Z)(e,2),s=t[0],c=t[1];return(0,o.useEffect)((function(){(0,r.Z)((0,n.Z)().mark((function e(){var t,s;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat("https://manage-your-todos-backend.onrender.com","/users"),{credentials:"include"});case 3:return t=e.sent,e.next=6,t.json();case 6:if((s=e.sent).success){e.next=9;break}throw s;case 9:c(s.data),e.next=14;break;case 12:e.prev=12,e.t0=e.catch(0);case 14:case"end":return e.stop()}}),e,null,[[0,12]])})))()}),[]),(0,f.jsx)("div",{className:"users-container",children:(0,f.jsxs)("div",{className:"users-table",children:[(0,f.jsx)("div",{className:"users-table-row",children:(0,f.jsxs)("div",{className:"user-info user-info-heading",children:[(0,f.jsx)("div",{className:"user-id",children:"Id"}),(0,f.jsx)("div",{className:"user-info-field",children:"Name"}),(0,f.jsx)("div",{className:"user-info-field",children:"Email"})]})}),s.map((function(e){return(0,f.jsx)("div",{className:"users-table-row",children:(0,f.jsx)(v,{setUsers:c,userId:e.id,userName:e.name,userEmail:e.email})},e.id)}))]})})}var b=function(){var e=(0,o.useContext)(l.Z),t=e.authUser,s=e.isAuthenticated,u=(0,o.useState)([]),d=(0,a.Z)(u,2),m=d[0],p=d[1],x=(0,c.s0)();return(0,o.useEffect)((function(){!function(){var e=(0,r.Z)((0,n.Z)().mark((function e(){var t,s;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat("https://manage-your-todos-backend.onrender.com","/todos/"),{credentials:"include"});case 3:return t=e.sent,e.next=6,t.json();case 6:if((s=e.sent).success){e.next=9;break}throw s;case 9:p(s.data),e.next=14;break;case 12:e.prev=12,e.t0=e.catch(0);case 14:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}()()}),[]),s?(0,f.jsxs)("div",{className:"dashboard-container",children:[(0,f.jsxs)("section",{className:"dashboard-profile",children:[(0,f.jsxs)("span",{className:"dashboard-profile-name",children:["Welcome ",t.name,null!=t.role?"(Admin)":null]}),(0,f.jsx)(h,{profileImage:t.profileImage})]}),null!=t.role?(0,f.jsx)(j,{}):(0,f.jsxs)("section",{className:"dashboard-todos",children:[(0,f.jsx)("button",{className:"dashboard-todos-addTodoButton",onClick:function(){return x("/addtodo")},children:"ADD TODO"}),(0,f.jsx)("h2",{className:"dashboard-todos-heading",children:"My Todos"}),(0,f.jsx)("div",{className:"dashboard-todos-list",children:m.map((function(e,t){return(0,f.jsx)(i.Z,{setTodos:p,serialNo:t+1,todoId:e.id,title:e.title,body:e.body,completed:e.completed},e.id)}))})]})]}):(0,f.jsx)(c.Fg,{to:"/"})}},797:function(e,t,s){s.d(t,{Z:function(){return f}});var n=s(165),r=s(861),a=s(439),o=s(791),c=s(126),i=s(73),u=s(345),l=s(725),d=s(184);function f(e){var t=e.setTodos,s=e.serialNo,f=e.todoId,m=e.title,h=e.body,p=e.completed,x=(0,o.useContext)(l.Z),v=x.loading,j=x.setLoading,b=(0,o.useState)(m),N=(0,a.Z)(b,2),g=N[0],y=N[1],Z=(0,o.useState)(h),k=(0,a.Z)(Z,2),w=k[0],C=k[1],B=(0,o.useState)(1===p),T=(0,a.Z)(B,2),E=T[0],P=T[1],S=(0,o.useState)({}),L=(0,a.Z)(S,2),U=L[0],I=L[1],D=(0,o.useRef)(),F=(0,o.useRef)(),R=(0,o.useRef)();function A(){return(A=(0,r.Z)((0,n.Z)().mark((function e(){var t,s,r;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return j(!0),e.prev=1,e.next=4,fetch("".concat("https://manage-your-todos-backend.onrender.com","/todos/").concat(f),{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({title:g,body:w,completed:E})});case 4:return t=e.sent,e.next=7,t.json();case 7:if(s=e.sent,I({}),s.success){e.next=11;break}throw s;case 11:j(!1),i.ZP.success(s.message),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(1),j(!1),"object"===typeof e.t0.error&&(r={},e.t0.error.forEach((function(e){for(var t in e)r[t]=e[t][0]})),I(r));case 19:case"end":return e.stop()}}),e,null,[[1,15]])})))).apply(this,arguments)}function O(){return(O=(0,r.Z)((0,n.Z)().mark((function e(){var s,r;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return j(!0),e.prev=1,e.next=4,fetch("".concat("https://manage-your-todos-backend.onrender.com","/todos/").concat(f),{method:"DELETE",credentials:"include"});case 4:return s=e.sent,e.next=7,s.json();case 7:if((r=e.sent).success){e.next=10;break}throw r;case 10:t((function(e){return e.filter((function(e){return e.id!==r.data.todoId}))})),j(!1),i.ZP.success(r.message),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(1),j(!1),i.ZP.error(e.t0.message);case 19:case"end":return e.stop()}}),e,null,[[1,15]])})))).apply(this,arguments)}return(0,o.useEffect)((function(){D.current.style.height="1px",D.current.style.height=1+D.current.scrollHeight+"px",F.current.style.height="1px",F.current.style.height=5+F.current.scrollHeight+"px"}),[g,w]),(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(u.Z,{confirmBoxRef:R,deleteFunction:function(){return O.apply(this,arguments)}}),(0,d.jsxs)("div",{className:"todos-list-item",children:[(0,d.jsxs)("div",{className:"todos-list-item-todoSerialNo",children:[s,(0,d.jsxs)("div",{className:"checkBox-container",children:[(0,d.jsx)("input",{className:"checkBox-input",type:"checkbox",checked:E,onChange:function(e){return P(e.target.checked)}}),(0,d.jsx)("label",{className:"checkBox-label"})]})]}),(0,d.jsxs)("div",{className:"todos-list-item-todoTitle",children:[(0,d.jsxs)("div",{className:"todoContent-wrapper",children:[(0,d.jsx)(c.Ph1,{}),(0,d.jsx)("textarea",{ref:D,className:"todoTitle-content",type:"text",value:g,onChange:function(e){return y(e.target.value)}})]}),(0,d.jsx)("span",{className:"updateTodo-error",children:U.title})]}),(0,d.jsxs)("div",{className:"todos-list-item-todoBody",children:[(0,d.jsxs)("div",{className:"todoContent-wrapper",children:[(0,d.jsx)(c.Ph1,{}),(0,d.jsx)("textarea",{ref:F,className:"todoBody-content",type:"text",value:w,onChange:function(e){return C(e.target.value)}})]}),(0,d.jsx)("span",{className:"updateTodo-error",children:U.body})]}),(0,d.jsxs)("div",{className:"todos-list-item-todoButtons",children:[(0,d.jsx)("button",{className:"todos-list-item-updateTodoButton",onClick:function(){if(v)return!1;!function(){A.apply(this,arguments)}()},children:"Update"}),(0,d.jsx)("button",{className:"todos-list-item-deleteTodoButton",onClick:function(){return R.current.classList.add("active")},children:"Delete"})]})]})]})}}}]);
//# sourceMappingURL=213.8315ca4f.chunk.js.map