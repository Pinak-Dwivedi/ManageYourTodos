"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[213],{345:function(e,t,n){n.d(t,{Z:function(){return o}});var s=n(791),r=n(725),a=n(184);function o(e){var t=e.confirmBoxRef,n=e.deleteFunction,o=(0,s.useContext)(r.Z).loading;return(0,s.useEffect)((function(){if(null!=t.current){var e=setTimeout((function(){t.current.classList.remove("active")}),5e3);return function(){clearTimeout(e)}}}),[t]),(0,a.jsx)("div",{className:"confirmBox-overlay",children:(0,a.jsxs)("div",{ref:t,className:"confirmBox-container",children:[(0,a.jsx)("div",{className:"confirmBox-message",children:"\u26a0\ufe0f Are you sure! you want to delete this todo"}),(0,a.jsxs)("div",{className:"confirmBox-buttonsContainer",children:[(0,a.jsx)("button",{className:"confirmBox-button confirmBox-yesButton",onClick:function(){if(o)return!1;n(),t.current.classList.remove("active")},children:"Yes"}),(0,a.jsx)("button",{className:"confirmBox-button confirmBox-noButton",onClick:function(){return t.current.classList.remove("active")},children:"No"})]})]})})}},213:function(e,t,n){n.r(t),n.d(t,{default:function(){return b}});var s=n(165),r=n(861),a=n(439),o=n(791),c=n(689),i=n(797),u=n(355),l=n(725),d=n(73),f=n(184);function m(){var e=(0,o.useContext)(l.Z),t=e.authUser,n=e.setAuthUser,c=e.loading,i=e.setLoading,u=(0,o.useState)(t.name),m=(0,a.Z)(u,2),h=m[0],p=m[1],x=(0,o.useState)(t.email),v=(0,a.Z)(x,2),j=v[0],b=v[1],N=(0,o.useState)({}),g=(0,a.Z)(N,2),y=g[0],Z=g[1];function k(){return(k=(0,r.Z)((0,s.Z)().mark((function e(r){var a,o,c;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i(!0),r.preventDefault(),e.prev=2,e.next=5,fetch("".concat("https://manage-your-todos-backend.onrender.com","/users/").concat(t.id),{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:h,email:j})});case 5:return a=e.sent,e.next=8,a.json();case 8:if(o=e.sent,Z({}),o.success){e.next=12;break}throw o;case 12:n(o.user),i(!1),d.ZP.success(o.message),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(2),i(!1),"object"===typeof e.t0.error?(c={},e.t0.error.forEach((function(e){for(var t in e)c[t]=e[t][0]})),Z(c)):d.ZP.error(e.t0.message);case 21:case"end":return e.stop()}}),e,null,[[2,17]])})))).apply(this,arguments)}return(0,f.jsxs)("form",{onSubmit:function(e){if(c)return!1;!function(e){k.apply(this,arguments)}(e)},className:"profile-update-form",children:[(0,f.jsxs)("div",{className:"profile-update-form-field",children:[(0,f.jsx)("label",{className:"profile-update-form-label",htmlFor:"name",children:"Name"}),(0,f.jsx)("input",{className:"profile-update-form-input",required:!0,type:"text",id:"name",value:h,onChange:function(e){return p(e.target.value)}}),(0,f.jsx)("span",{className:"profile-update-form-error",children:y.name})]}),(0,f.jsxs)("div",{className:"profile-update-form-field",children:[(0,f.jsx)("label",{className:"profile-update-form-label",htmlFor:"email",children:"Email"}),(0,f.jsx)("input",{className:"profile-update-form-input",required:!0,type:"text",id:"email",value:j,onChange:function(e){return b(e.target.value)}}),(0,f.jsx)("span",{className:"profile-update-form-error",children:y.email})]}),(0,f.jsx)("button",{className:"profile-update-form-submitButton",type:"submit",children:"Update Profile"})]})}function h(e){var t=e.profileImage,n=(0,o.useRef)();return(0,o.useEffect)((function(){function e(e){if(null!=n.current){var t=n.current.firstChild,s=e.target===t;(s||null==e.target.closest(".dashboard-profile-info"))&&(s?n.current.classList.toggle("active"):n.current.classList.remove("active"))}}return document.addEventListener("click",e),function(){return document.removeEventListener("click",e)}}),[]),(0,f.jsxs)("div",{ref:n,className:"dashboard-profile-info",children:[(0,f.jsx)("button",{className:"dashboard-profile-info-button",children:null==t?(0,f.jsx)(u.$yZ,{className:"dashboard-profile-info-image",size:"5rem",color:"#009fbd"}):(0,f.jsx)("img",{className:"dashboard-profile-info-image",alt:"Profile Pic",src:"".concat("https://manage-your-todos-backend.onrender.com","/").concat(t)})}),(0,f.jsx)("div",{className:"dashboard-profile-info-content",children:(0,f.jsx)(m,{})})]})}var p=n(126),x=n(345);function v(e){var t=e.setUsers,n=e.userId,i=e.userName,u=e.userEmail,m=(0,o.useContext)(l.Z),h=m.loading,v=m.setLoading,j=(0,o.useState)(i),b=(0,a.Z)(j,2),N=b[0],g=b[1],y=(0,o.useState)(u),Z=(0,a.Z)(y,2),k=Z[0],w=Z[1],C=(0,o.useState)([]),B=(0,a.Z)(C,2),T=B[0],E=B[1],P=(0,c.s0)(),S=(0,o.useRef)();function L(){return(L=(0,r.Z)((0,s.Z)().mark((function e(){var t,r,a;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return v(!0),e.prev=1,e.next=4,fetch("".concat("https://manage-your-todos-backend.onrender.com","/users/").concat(n),{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:N,email:k})});case 4:return t=e.sent,e.next=7,t.json();case 7:if(r=e.sent,E({}),r.success){e.next=11;break}throw r;case 11:v(!1),d.ZP.success(r.message),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(1),v(!1),"object"===typeof e.t0.error?(a={},e.t0.error.forEach((function(e){for(var t in e)a[t]=e[t][0]})),E(a)):d.ZP.error(e.t0.error);case 19:case"end":return e.stop()}}),e,null,[[1,15]])})))).apply(this,arguments)}function U(){return(U=(0,r.Z)((0,s.Z)().mark((function e(){var r,a;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return v(!0),e.prev=1,e.next=4,fetch("".concat("https://manage-your-todos-backend.onrender.com","/users/").concat(n),{method:"DELETE",credentials:"include"});case 4:return r=e.sent,e.next=7,r.json();case 7:if((a=e.sent).success){e.next=10;break}throw a;case 10:t((function(e){return e.filter((function(e){return e.id!==n}))})),v(!1),d.ZP.success(a.message),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(1),v(!1),d.ZP.error(e.t0.error);case 19:case"end":return e.stop()}}),e,null,[[1,15]])})))).apply(this,arguments)}return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(x.Z,{confirmBoxRef:S,deleteFunction:function(){return U.apply(this,arguments)}}),(0,f.jsxs)("div",{className:"user-info",children:[(0,f.jsx)("div",{className:"user-id",children:n}),(0,f.jsxs)("div",{className:"user-info-field",children:[(0,f.jsxs)("div",{className:"user-info-field-input",children:[(0,f.jsx)(p.Ph1,{}),(0,f.jsx)("input",{className:"user-name",type:"text",value:N,onChange:function(e){return g(e.target.value)}})]}),(0,f.jsx)("span",{className:"user-info-field-error",children:T.name})]}),(0,f.jsxs)("div",{className:"user-info-field",children:[(0,f.jsxs)("div",{className:"user-info-field-input",children:[(0,f.jsx)(p.Ph1,{}),(0,f.jsx)("input",{className:"user-email",type:"text",value:k,onChange:function(e){return w(e.target.value)}})]}),(0,f.jsx)("span",{className:"user-info-field-error",children:T.email})]})]}),(0,f.jsxs)("div",{className:"user-buttons",children:[(0,f.jsx)("button",{className:"user-view-todos-button user-button",onClick:function(){return P("/usertodos/".concat(n),{state:{userName:N}})},children:"View Todos"}),(0,f.jsx)("button",{className:"user-update-button user-button",onClick:function(){if(h)return!1;!function(){L.apply(this,arguments)}()},children:"Update"}),(0,f.jsx)("button",{className:"user-delete-button user-button",onClick:function(){return S.current.classList.add("active")},children:"Delete"})]})]})}function j(){var e=(0,o.useState)([]),t=(0,a.Z)(e,2),n=t[0],c=t[1];return(0,o.useEffect)((function(){(0,r.Z)((0,s.Z)().mark((function e(){var t,n;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat("https://manage-your-todos-backend.onrender.com","/users"),{credentials:"include"});case 3:return t=e.sent,e.next=6,t.json();case 6:if((n=e.sent).success){e.next=9;break}throw n;case 9:c(n.data),e.next=14;break;case 12:e.prev=12,e.t0=e.catch(0);case 14:case"end":return e.stop()}}),e,null,[[0,12]])})))()}),[]),(0,f.jsx)("div",{className:"users-container",children:(0,f.jsxs)("div",{className:"users-table",children:[(0,f.jsx)("div",{className:"users-table-row",children:(0,f.jsxs)("div",{className:"user-info user-info-heading",children:[(0,f.jsx)("div",{className:"user-id",children:"Id"}),(0,f.jsx)("div",{className:"user-info-field",children:"Name"}),(0,f.jsx)("div",{className:"user-info-field",children:"Email"})]})}),n.map((function(e){return(0,f.jsx)("div",{className:"users-table-row",children:(0,f.jsx)(v,{setUsers:c,userId:e.id,userName:e.name,userEmail:e.email})},e.id)}))]})})}var b=function(){var e=(0,o.useContext)(l.Z),t=e.authUser,n=e.isAuthenticated,u=(0,o.useState)([]),d=(0,a.Z)(u,2),m=d[0],p=d[1],x=(0,c.s0)();return(0,o.useEffect)((function(){!function(){var e=(0,r.Z)((0,s.Z)().mark((function e(){var t,n;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat("https://manage-your-todos-backend.onrender.com","/todos/"),{credentials:"include"});case 3:return t=e.sent,e.next=6,t.json();case 6:if((n=e.sent).success){e.next=9;break}throw n;case 9:p(n.data),e.next=14;break;case 12:e.prev=12,e.t0=e.catch(0);case 14:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}()()}),[]),n?(0,f.jsxs)("div",{className:"dashboard-container",children:[(0,f.jsxs)("section",{className:"dashboard-profile",children:[(0,f.jsxs)("span",{className:"dashboard-profile-name",children:["Welcome ",t.name,null!=t.role?"(Admin)":null]}),(0,f.jsx)(h,{profileImage:t.profileImage})]}),null!=t.role?(0,f.jsx)(j,{}):(0,f.jsxs)("section",{className:"dashboard-todos",children:[(0,f.jsx)("button",{className:"dashboard-todos-addTodoButton",onClick:function(){return x("/addtodo")},children:"ADD TODO"}),(0,f.jsx)("h2",{className:"dashboard-todos-heading",children:"My Todos"}),(0,f.jsx)("div",{className:"dashboard-todos-list",children:m.map((function(e,t){return(0,f.jsx)(i.Z,{setTodos:p,serialNo:t+1,todoId:e.id,title:e.title,body:e.body,completed:e.completed},e.id)}))})]})]}):(0,f.jsx)(c.Fg,{to:"/"})}},797:function(e,t,n){n.d(t,{Z:function(){return f}});var s=n(165),r=n(861),a=n(439),o=n(791),c=n(126),i=n(73),u=n(345),l=n(725),d=n(184);function f(e){var t=e.setTodos,n=e.serialNo,f=e.todoId,m=e.title,h=e.body,p=e.completed,x=(0,o.useContext)(l.Z),v=x.loading,j=x.setLoading,b=(0,o.useState)(m),N=(0,a.Z)(b,2),g=N[0],y=N[1],Z=(0,o.useState)(h),k=(0,a.Z)(Z,2),w=k[0],C=k[1],B=(0,o.useState)(1===p),T=(0,a.Z)(B,2),E=T[0],P=T[1],S=(0,o.useState)({}),L=(0,a.Z)(S,2),U=L[0],I=L[1],D=(0,o.useRef)(),F=(0,o.useRef)(),R=(0,o.useRef)();function A(){return(A=(0,r.Z)((0,s.Z)().mark((function e(){var t,n,r;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return j(!0),e.prev=1,e.next=4,fetch("".concat("https://manage-your-todos-backend.onrender.com","/todos/").concat(f),{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({title:g,body:w,completed:E})});case 4:return t=e.sent,e.next=7,t.json();case 7:if(n=e.sent,I({}),n.success){e.next=11;break}throw n;case 11:j(!1),i.ZP.success(n.message),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(1),j(!1),"object"===typeof e.t0.error&&(r={},e.t0.error.forEach((function(e){for(var t in e)r[t]=e[t][0]})),I(r));case 19:case"end":return e.stop()}}),e,null,[[1,15]])})))).apply(this,arguments)}function O(){return(O=(0,r.Z)((0,s.Z)().mark((function e(){var n,r;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return j(!0),e.prev=1,e.next=4,fetch("".concat("https://manage-your-todos-backend.onrender.com","/todos/").concat(f),{method:"DELETE",credentials:"include"});case 4:return n=e.sent,e.next=7,n.json();case 7:if((r=e.sent).success){e.next=10;break}throw r;case 10:t((function(e){return e.filter((function(e){return e.id!==r.data.todoId}))})),j(!1),i.ZP.success(r.message),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(1),j(!1),i.ZP.error(e.t0.message);case 19:case"end":return e.stop()}}),e,null,[[1,15]])})))).apply(this,arguments)}return(0,o.useEffect)((function(){D.current.style.height="1px",D.current.style.height=1+D.current.scrollHeight+"px",F.current.style.height="1px",F.current.style.height=5+F.current.scrollHeight+"px"}),[g,w]),(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(u.Z,{confirmBoxRef:R,deleteFunction:function(){return O.apply(this,arguments)}}),(0,d.jsxs)("div",{className:"todos-list-item",children:[(0,d.jsxs)("div",{className:"todos-list-item-todoSerialNo",children:[n,(0,d.jsxs)("div",{className:"checkBox-container",children:[(0,d.jsx)("input",{className:"checkBox-input",type:"checkbox",checked:E,onChange:function(e){return P(e.target.checked)}}),(0,d.jsx)("label",{className:"checkBox-label"})]})]}),(0,d.jsxs)("div",{className:"todos-list-item-todoTitle",children:[(0,d.jsxs)("div",{className:"todoContent-wrapper",children:[(0,d.jsx)(c.Ph1,{}),(0,d.jsx)("textarea",{ref:D,className:"todoTitle-content",type:"text",value:g,onChange:function(e){return y(e.target.value)}})]}),(0,d.jsx)("span",{className:"updateTodo-error",children:U.title})]}),(0,d.jsxs)("div",{className:"todos-list-item-todoBody",children:[(0,d.jsxs)("div",{className:"todoContent-wrapper",children:[(0,d.jsx)(c.Ph1,{}),(0,d.jsx)("textarea",{ref:F,className:"todoBody-content",type:"text",value:w,onChange:function(e){return C(e.target.value)}})]}),(0,d.jsx)("span",{className:"updateTodo-error",children:U.body})]}),(0,d.jsxs)("div",{className:"todos-list-item-todoButtons",children:[(0,d.jsx)("button",{className:"todos-list-item-updateTodoButton",onClick:function(){if(v)return!1;!function(){A.apply(this,arguments)}()},children:"Update"}),(0,d.jsx)("button",{className:"todos-list-item-deleteTodoButton",onClick:function(){return R.current.classList.add("active")},children:"Delete"})]})]})]})}}}]);
//# sourceMappingURL=213.a70bea8e.chunk.js.map