{"version":3,"file":"static/js/894.7704426d.chunk.js","mappings":"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","sources":["components/dashboard/addTodo/AddTodo.jsx"],"sourcesContent":["import \"./AddTodo.css\"\r\nimport {useState, useContext, useRef, useEffect } from 'react';\r\nimport { useNavigate, useLocation } from 'react-router-dom';\r\nimport AuthContext from '../../../index';\r\nimport toast from \"react-hot-toast\";\r\n\r\nexport default function AddTodo()\r\n{\r\n\r\n    const {authUser, isAuthenticated, loading, setLoading} = useContext(AuthContext);\r\n    const [title, setTitle] = useState('');\r\n    const [body, setBody] = useState('');\r\n    const [error, setError] = useState({});\r\n    const titleRef = useRef();\r\n    const bodyRef = useRef();\r\n\r\n    const navigate = useNavigate();\r\n    const location = useLocation();\r\n    \r\n    const userId = location.state !=null ? location.state.userId : null;\r\n\r\n    useEffect(()=>{\r\n        \r\n        if(!isAuthenticated)\r\n        navigate(\"/\");\r\n        \r\n        titleRef.current.style.height = \"1px\";\r\n        titleRef.current.style.height = (1+titleRef.current.scrollHeight)+\"px\";\r\n\r\n        bodyRef.current.style.height = \"1px\";\r\n        bodyRef.current.style.height = (5+bodyRef.current.scrollHeight)+\"px\";\r\n\r\n    },[title, body, isAuthenticated, navigate])\r\n\r\n    async function addTodo(e)\r\n    {\r\n        setLoading(true);\r\n        e.preventDefault();\r\n        try {\r\n            \r\n            const response = await fetch(`${process.env.REACT_APP_SERVER_URL}/todos?userId=${userId}`, {\r\n                method: \"POST\",\r\n                headers: {\r\n                    \"Content-Type\": \"application/json\"\r\n                },\r\n                credentials:\"include\",\r\n                body:JSON.stringify({\r\n                    title, body\r\n                })\r\n            })\r\n\r\n            const data = await response.json();\r\n\r\n            // console.log(data);\r\n\r\n            setError({});\r\n\r\n            if(!data.success)\r\n            throw data;\r\n\r\n            if(authUser.role === \"admin\")\r\n            navigate(-1);\r\n\r\n            navigate(\"/dashboard\");\r\n            setLoading(false);\r\n\r\n            toast.success(data.message);\r\n\r\n        } catch (err) {\r\n\r\n            setLoading(false);\r\n            //validation errors\r\n            if(typeof err.error === \"object\")\r\n            {\r\n            const e = {}; \r\n            err.error.forEach( err => {\r\n\r\n                for(let key in err)\r\n                e[key] = err[key][0]\r\n\r\n            });\r\n            setError(e);\r\n            }\r\n            else\r\n            toast.error(err.error);\r\n        }\r\n    }\r\n\r\n    return(\r\n        <div className=\"addTodo-container\">\r\n            <form className=\"addTodo-form\" onSubmit={(e) => {\r\n\r\n                if(loading)\r\n                return false;\r\n\r\n                addTodo(e)\r\n            }}>\r\n\r\n            <div className=\"addTodo-heading\">Add Todo</div>\r\n\r\n                <div className=\"addTodo-form-field\">\r\n                    <label className=\"addTodo-form-label\" htmlFor=\"title\">Title</label>\r\n                    <textarea ref={titleRef} className=\"addTodo-form-textarea\" type=\"text\" id=\"title\" name=\"title\" placeholder=\"Enter Title\" value={title} required onChange={(e) => setTitle(e.target.value)}></textarea>\r\n                    <span className=\"addTodo-form-error\">{error.title}</span>\r\n                </div>\r\n\r\n                <div className=\"addTodo-form-field\">\r\n                    <label className=\"addTodo-form-label\" htmlFor=\"body\">Body</label>\r\n                    <textarea ref={bodyRef} className=\"addTodo-form-textarea\" type=\"text\" id=\"body\" name=\"body\" placeholder=\"Enter Body\" value={body} required onChange={(e) => setBody(e.target.value)}></textarea>\r\n                    <span className=\"addTodo-form-error\">{error.body}</span>\r\n                </div>\r\n\r\n                <button className=\"addTodo-form-submitButton\"type=\"submit\">Add Todo</button>\r\n            </form>\r\n        </div>\r\n    )\r\n}"],"names":["AddTodo","_useContext","useContext","AuthContext","authUser","isAuthenticated","loading","setLoading","_useState","useState","_useState2","_slicedToArray","title","setTitle","_useState3","_useState4","body","setBody","_useState5","_useState6","error","setError","titleRef","useRef","bodyRef","navigate","useNavigate","location","useLocation","userId","state","_addTodo","_asyncToGenerator","_regeneratorRuntime","mark","_callee","e","response","data","_e","wrap","_context","prev","next","preventDefault","fetch","concat","process","method","headers","credentials","JSON","stringify","sent","json","success","role","toast","message","t0","forEach","err","key","stop","apply","arguments","useEffect","current","style","height","scrollHeight","_jsx","className","children","_jsxs","onSubmit","_x","addTodo","htmlFor","ref","type","id","name","placeholder","value","required","onChange","target"],"sourceRoot":""}