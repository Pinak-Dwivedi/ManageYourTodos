{"version":3,"file":"static/js/921.8f1eca32.chunk.js","mappings":"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","sources":["components/login/Login.jsx"],"sourcesContent":["import React, {useState, useEffect, useContext} from 'react';\r\nimport './Login.css';\r\nimport { Link, useNavigate } from 'react-router-dom';\r\nimport AuthContext from '../../index';\r\nimport toast from \"react-hot-toast\";\r\n\r\nfunction Login()\r\n{\r\n\r\n  const {setAuthUser,isAuthenticated,setIsAuthenticated, loading, setLoading} = useContext(AuthContext);\r\n\r\n    const [email, setEmail] = useState('');\r\n    const [password, setPassword] = useState('');\r\n    const [error, setError] = useState({});\r\n    const navigate = useNavigate();\r\n\r\n    //using Navigate component instead of useNavigate because will have to call it inside useEffect on component did mount and update without dependencies array\r\n\r\n    useEffect(()=>{\r\n\r\n      if(isAuthenticated)\r\n      return navigate(\"/dashboard\")\r\n\r\n    })\r\n\r\n    async function login(event)\r\n    {\r\n      setLoading(true);\r\n      try {\r\n        event.preventDefault();\r\n        const response = await fetch(`${process.env.REACT_APP_SERVER_URL}/users/login`,{\r\n        method: \"POST\",\r\n        credentials: \"include\",\r\n        headers:{\r\n          \"Content-Type\": \"application/json\"\r\n        },\r\n        body: JSON.stringify({\r\n          email,\r\n          password\r\n        })\r\n      })\r\n      const data = await response.json();\r\n\r\n      setError({});\r\n\r\n      // console.log(data)\r\n      if(!data.success)\r\n      throw data;\r\n\r\n      setIsAuthenticated(true);\r\n      setAuthUser(data.user);\r\n      \r\n      navigate(\"/dashboard\");\r\n      setLoading(false);\r\n      toast.success(data.message);\r\n      \r\n      } catch (err) {\r\n\r\n        setIsAuthenticated(false);\r\n        setAuthUser({});\r\n        setLoading(false);\r\n        \r\n        //validation errors\r\n        if(typeof err.error === \"object\")\r\n        {\r\n          const e = {}; \r\n          err.error.forEach( err => {\r\n\r\n            for(let key in err)\r\n            e[key] = err[key][0]\r\n\r\n          });\r\n          setError(e);\r\n        }\r\n        else\r\n        toast.error(err.error);\r\n      }\r\n    }\r\n  \r\n    return (\r\n        <div className=\"login-container\">\r\n          <form className=\"login-form\" onSubmit={(e) => {\r\n            if(loading)\r\n            return false;\r\n\r\n            login(e);\r\n          }}>\r\n\r\n            <div className=\"login-heading\">Log In</div>\r\n\r\n            <div className=\"login-form-field\">\r\n              <label className=\"login-form-label\" htmlFor=\"email\">Email address</label>\r\n              <input className=\"login-form-input\" type=\"text\" id=\"email\" name=\"email\" placeholder=\"Enter Email\" value={email} required onChange={(e) => setEmail(e.target.value)}/>\r\n              <span className=\"login-form-error\">{error.email}</span>\r\n            </div>\r\n\r\n            <div className=\"login-form-field\">\r\n              <label className=\"login-form-label\" htmlFor=\"password\">Password</label>\r\n              <input className=\"login-form-input\" type=\"password\" id=\"password\" name=\"password\" placeholder=\"Enter Password\" value={password} required onChange={(e) => setPassword(e.target.value)}/>\r\n              <span className=\"login-form-error\">{error.password}</span>\r\n            </div>\r\n\r\n            <button className=\"login-form-submitButton\"type=\"submit\">LogIn</button>\r\n\r\n            <div className='forgotPass-noAccount'>\r\n                <div className='forgotPass'>\r\n                Forgot Passowrd? <Link className=\"forgotPass-noAccount-link\" to=\"/forgotpassword\">Forgot Password</Link>\r\n                </div>\r\n\r\n                <div className='noAccount'>\r\n                Do not have an accont? <Link className=\"forgotPass-noAccount-link\" to=\"/register\">SignUp</Link>\r\n                </div>\r\n            </div>\r\n          </form>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Login;"],"names":["_useContext","useContext","AuthContext","setAuthUser","isAuthenticated","setIsAuthenticated","loading","setLoading","_useState","useState","_useState2","_slicedToArray","email","setEmail","_useState3","_useState4","password","setPassword","_useState5","_useState6","error","setError","navigate","useNavigate","_login","_asyncToGenerator","_regeneratorRuntime","mark","_callee","event","response","data","e","wrap","_context","prev","next","preventDefault","fetch","concat","process","method","credentials","headers","body","JSON","stringify","sent","json","success","user","toast","message","t0","forEach","err","key","stop","apply","arguments","useEffect","_jsx","className","children","_jsxs","onSubmit","_x","login","htmlFor","type","id","name","placeholder","value","required","onChange","target","Link","to"],"sourceRoot":""}