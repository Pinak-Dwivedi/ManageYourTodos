"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[9],{345:function(e,t,n){n.d(t,{Z:function(){return c}});var s=n(791),o=n(725),r=n(184);function c(e){var t=e.confirmBoxRef,n=e.deleteFunction,c=(0,s.useContext)(o.Z).loading;return(0,s.useEffect)((function(){if(null!=t.current){var e=setTimeout((function(){t.current.classList.remove("active")}),5e3);return function(){clearTimeout(e)}}}),[t]),(0,r.jsx)("div",{className:"confirmBox-overlay",children:(0,r.jsxs)("div",{ref:t,className:"confirmBox-container",children:[(0,r.jsx)("div",{className:"confirmBox-message",children:"\u26a0\ufe0f Are you sure! you want to delete this todo"}),(0,r.jsxs)("div",{className:"confirmBox-buttonsContainer",children:[(0,r.jsx)("button",{className:"confirmBox-button confirmBox-yesButton",onClick:function(){if(c)return!1;n(),t.current.classList.remove("active")},children:"Yes"}),(0,r.jsx)("button",{className:"confirmBox-button confirmBox-noButton",onClick:function(){return t.current.classList.remove("active")},children:"No"})]})]})})}},797:function(e,t,n){n.d(t,{Z:function(){return f}});var s=n(165),o=n(861),r=n(439),c=n(791),a=n(126),i=n(73),u=n(345),d=n(725),l=n(184);function f(e){var t=e.setTodos,n=e.serialNo,f=e.todoId,h=e.title,x=e.body,m=e.completed,p=(0,c.useContext)(d.Z),v=p.loading,j=p.setLoading,N=(0,c.useState)(h),y=(0,r.Z)(N,2),b=y[0],k=y[1],g=(0,c.useState)(x),Z=(0,r.Z)(g,2),B=Z[0],T=Z[1],C=(0,c.useState)(1===m),w=(0,r.Z)(C,2),E=w[0],S=w[1],L=(0,c.useState)({}),P=(0,r.Z)(L,2),D=P[0],R=P[1],F=(0,c.useRef)(),I=(0,c.useRef)(),O=(0,c.useRef)();function U(){return(U=(0,o.Z)((0,s.Z)().mark((function e(){var t,n,o;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return j(!0),e.prev=1,e.next=4,fetch("".concat("https://manage-your-todos-backend.onrender.com","/todos/").concat(f),{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({title:b,body:B,completed:E})});case 4:return t=e.sent,e.next=7,t.json();case 7:if(n=e.sent,R({}),n.success){e.next=11;break}throw n;case 11:j(!1),i.ZP.success(n.message),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(1),j(!1),"object"===typeof e.t0.error&&(o={},e.t0.error.forEach((function(e){for(var t in e)o[t]=e[t][0]})),R(o));case 19:case"end":return e.stop()}}),e,null,[[1,15]])})))).apply(this,arguments)}function A(){return(A=(0,o.Z)((0,s.Z)().mark((function e(){var n,o;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return j(!0),e.prev=1,e.next=4,fetch("".concat("https://manage-your-todos-backend.onrender.com","/todos/").concat(f),{method:"DELETE",credentials:"include"});case 4:return n=e.sent,e.next=7,n.json();case 7:if((o=e.sent).success){e.next=10;break}throw o;case 10:t((function(e){return e.filter((function(e){return e.id!==o.data.todoId}))})),j(!1),i.ZP.success(o.message),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(1),j(!1),i.ZP.error(e.t0.message);case 19:case"end":return e.stop()}}),e,null,[[1,15]])})))).apply(this,arguments)}return(0,c.useEffect)((function(){F.current.style.height="1px",F.current.style.height=1+F.current.scrollHeight+"px",I.current.style.height="1px",I.current.style.height=5+I.current.scrollHeight+"px"}),[b,B]),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(u.Z,{confirmBoxRef:O,deleteFunction:function(){return A.apply(this,arguments)}}),(0,l.jsxs)("div",{className:"todos-list-item",children:[(0,l.jsxs)("div",{className:"todos-list-item-todoSerialNo",children:[n,(0,l.jsxs)("div",{className:"checkBox-container",children:[(0,l.jsx)("input",{className:"checkBox-input",type:"checkbox",checked:E,onChange:function(e){return S(e.target.checked)}}),(0,l.jsx)("label",{className:"checkBox-label"})]})]}),(0,l.jsxs)("div",{className:"todos-list-item-todoTitle",children:[(0,l.jsxs)("div",{className:"todoContent-wrapper",children:[(0,l.jsx)(a.Ph1,{}),(0,l.jsx)("textarea",{ref:F,className:"todoTitle-content",type:"text",value:b,onChange:function(e){return k(e.target.value)}})]}),(0,l.jsx)("span",{className:"updateTodo-error",children:D.title})]}),(0,l.jsxs)("div",{className:"todos-list-item-todoBody",children:[(0,l.jsxs)("div",{className:"todoContent-wrapper",children:[(0,l.jsx)(a.Ph1,{}),(0,l.jsx)("textarea",{ref:I,className:"todoBody-content",type:"text",value:B,onChange:function(e){return T(e.target.value)}})]}),(0,l.jsx)("span",{className:"updateTodo-error",children:D.body})]}),(0,l.jsxs)("div",{className:"todos-list-item-todoButtons",children:[(0,l.jsx)("button",{className:"todos-list-item-updateTodoButton",onClick:function(){if(v)return!1;!function(){U.apply(this,arguments)}()},children:"Update"}),(0,l.jsx)("button",{className:"todos-list-item-deleteTodoButton",onClick:function(){return O.current.classList.add("active")},children:"Delete"})]})]})]})}},9:function(e,t,n){n.r(t),n.d(t,{default:function(){return l}});var s=n(165),o=n(861),r=n(439),c=n(689),a=n(791),i=n(797),u=n(725),d=n(184);function l(){var e=(0,a.useContext)(u.Z),t=e.authUser,n=e.isAuthenticated,l=(0,c.UO)().id,f=(0,a.useState)([]),h=(0,r.Z)(f,2),x=h[0],m=h[1],p=(0,c.TH)(),v=(0,c.s0)();return(0,a.useEffect)((function(){!function(){var e=(0,o.Z)((0,s.Z)().mark((function e(){var t,n;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat("https://manage-your-todos-backend.onrender.com","/todos?id=").concat(l),{credentials:"include"});case 3:return t=e.sent,e.next=6,t.json();case 6:if((n=e.sent).success){e.next=9;break}throw n;case 9:m(n.data),e.next=14;break;case 12:e.prev=12,e.t0=e.catch(0);case 14:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}()()}),[l]),null!=t.role&&n?(0,d.jsxs)("div",{className:"userTodos-container",children:[(0,d.jsxs)("div",{className:"userTodos-heading",children:[null!=p.state?p.state.userName+"'s":null," Todos"]}),(0,d.jsx)("button",{className:"userTodos-addTodoButton",onClick:function(){return v("/addtodo",{state:{userId:l}})},children:"ADD TODO"}),(0,d.jsx)("div",{className:"userTodos-list",children:x.map((function(e,t){return(0,d.jsx)(i.Z,{setTodos:m,serialNo:t+1,todoId:e.id,title:e.title,body:e.body,completed:e.completed},e.id)}))})]}):(0,d.jsx)(c.Fg,{to:"/"})}}}]);
//# sourceMappingURL=9.bbda0130.chunk.js.map